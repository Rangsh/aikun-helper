# 程序员常见面试题

## Java 基础

**Java 中的八种基本数据类型分别是什么？它们的包装类有哪些？**
byte(1)、short(2)、int(4)、long(8)、float(4)、double(8)、char(2)、boolean(1)
对应的包装类：Byte、Short、Integer、Long、Float、Double、Character、Boolean

**== 和 equals() 的区别是什么？**
- ==：比较的是两个对象的引用地址是否相同（对于基本类型比较值）
- equals()：Object类的方法，默认实现同==，但通常会被重写用于比较对象内容

**String、StringBuilder、StringBuffer 的区别是什么？**
- String：不可变字符序列，线程安全但效率较低
- StringBuilder：可变字符序列，线程不安全但效率高
- StringBuffer：可变字符序列，线程安全但效率一般

**Java 中的异常处理机制是怎样的？checked 异常和 unchecked 异常的区别？**
- Exception和Error是Throwable的子类
- checked异常：编译时异常，必须处理（如IOException）
- unchecked异常：运行时异常（如NullPointerException）

**Java 中的 final、finally、finalize 分别有什么作用？**
- final：修饰类不能被继承，修饰方法不能被重写，修饰变量不能被修改
- finally：异常处理的一部分，通常用于释放资源
- finalize：Object类的方法，在对象被回收前调用

**Java 中的重载和重写有什么区别？**
- 重载(Overload)：同一类中方法名相同但参数不同，编译时多态
- 重写(Override)：子类重新定义父类方法，运行时多态

**Java 中的抽象类和接口有什么区别？什么时候使用抽象类，什么时候使用接口？**
- 抽象类：可以有构造方法、普通方法实现，单继承
- 接口：JDK8后可以有默认实现，多实现，更关注行为规范

**Java 中的泛型是什么？泛型擦除是怎么回事？**
- 泛型：编译时类型检查机制，提高类型安全
- 泛型擦除：运行时JVM会移除泛型信息，替换为Object或设定的边界类型

**Java 中的反射机制是什么？有什么应用场景？**
- 反射：在运行时动态获取类信息并操作类或对象
- 应用：Spring框架的IOC、MyBatis的ORM映射等

**JVM 的内存结构是怎样的？堆和栈的区别是什么？**
- 方法区、堆、虚拟机栈、本地方法栈、程序计数器
- 堆：存储对象实例，线程共享
- 栈：存储局部变量，线程私有

**Java 的垃圾回收机制是怎样的？有哪些垃圾回收算法？**
- 标记-清除、标记-整理、复制算法、分代收集

**Java 中的线程创建方式有哪些？它们的区别是什么？**
- 继承Thread类、实现Runnable接口、实现Callable接口、使用线程池

**synchronized 和 volatile 的区别是什么？**
- synchronized：保证原子性、可见性、有序性
- volatile：保证可见性、有序性，但不能保证原子性

**ThreadLocal 是什么？有什么作用？使用时需要注意什么？**
- 线程本地变量，每个线程都有自己独立的副本
- 注意内存泄漏问题，使用完需要remove()

**Java 中的锁有哪些？乐观锁和悲观锁的区别？**
- synchronized、ReentrantLock、ReadWriteLock等
- 悲观锁：总是假设最坏情况，先加锁
- 乐观锁：总是假设最好情况，使用CAS操作

## 数据库

**MySQL 索引的最左前缀匹配原则是什么？**
联合索引查询时，必须从最左边的列开始连续匹配，否则无法使用索引

**数据库的脏读、不可重复读和幻读分别是什么？**
- 脏读：读取了未提交的数据
- 不可重复读：两次读取结果不一致
- 幻读：查询结果行数不一致

**MySQL 的存储引擎有哪些？它们之间有什么区别？**
- InnoDB：支持事务、外键，默认存储引擎
- MyISAM：不支持事务，查询速度快

**MySQL 的覆盖索引是什么？**
查询的所有字段都在索引中，无需回表查询，提高查询效率

**MySQL 的索引类型有哪些？**
- 主键索引、唯一索引、普通索引、全文索引、组合索引

**MySQL 的索引下推是什么？**
在存储引擎层就过滤掉不满足条件的记录，减少回表次数

**MySQL InnoDB 引擎中的聚簇索引和非聚簇索引有什么区别？**
- 聚簇索引：叶子节点存储数据行
- 非聚簇索引：叶子节点存储主键值

**MySQL 中的回表是什么？**
通过二级索引查询时，需要根据主键值再次查找聚簇索引获取完整数据

**MySQL 中使用索引一定有效吗？如何排查索引效果？**
- 不一定，需要通过EXPLAIN分析执行计划
- 关注type、key、rows等字段

**MySQL 中的索引数量是否越多越好？为什么？**
- 不是，索引会占用存储空间，影响写入性能

**请详细描述 MySQL 的 B+ 树中查询数据的全过程**
- 从根节点开始，逐层比较键值，直到叶子节点，叶子节点之间有指针连接

**为什么 MySQL 选择使用 B+ 树作为索引结构？**
- 查询效率稳定、范围查询友好、磁盘读写代价低

## Redis

**Redis 的数据类型有哪些？分别有什么应用场景？**
- String：缓存、计数器
- Hash：存储对象
- List：消息队列
- Set：去重
- ZSet：排行榜

**Redis 的持久化机制有哪些？RDB 和 AOF 的区别是什么？**
- RDB：快照方式，数据恢复快但可能丢失数据
- AOF：日志方式，数据完整性高但恢复慢

**Redis 的缓存穿透、缓存击穿、缓存雪崩分别是什么？如何解决？**
- 穿透：查询不存在的数据，可用布隆过滤器解决
- 击穿：热点key过期，可用互斥锁解决
- 雪崩：大量key同时过期，可设置随机过期时间

**Redis 集群模式有哪些？主从复制、哨兵模式、集群模式的区别？**
- 主从复制：数据备份
- 哨兵模式：自动故障转移
- 集群模式：分布式存储

**Redis 的过期策略有哪些？内存淘汰机制是怎样的？**
- 定期删除+惰性删除
- 内存淘汰：LRU、LFU等策略

**Redis 如何实现分布式锁？有什么注意事项？**
- 使用SETNX命令，注意设置过期时间和原子性操作

**Redis 的事务机制是怎样的？支持回滚吗？**
- MULTI、EXEC等命令，不支持回滚

**Redis 的发布订阅模式是什么？有什么局限性？**
- 消息发布/订阅模式，但不保证消息可靠性

**Redis 为什么这么快？有哪些性能优化的方法？**
- 基于内存、单线程模型、IO多路复用

**Redis 的 Lua 脚本有什么作用？如何保证原子性？**
- 原子执行多个命令，避免竞态条件

## 消息队列

**为什么 RocketMQ 不使用 Zookeeper 作为注册中心呢？而选择自己实现 NameServer？**
- NameServer更轻量级，去中心化设计

**RabbitMQ 怎么实现延迟队列？**
- 通过死信交换机和TTL实现

**RabbitMQ 中消息什么时候会进入死信交换机？**
- 消息被拒绝、TTL过期、队列达到最大长度

**Kafka 的分区机制是怎样的？如何保证消息的顺序性？**
- 每个分区内部有序，通过分区键保证特定消息顺序

**Kafka 如何保证消息不丢失？Producer、Broker、Consumer 各层面的保障措施？**
- Producer：acks配置
- Broker：副本机制
- Consumer：手动提交offset

**Kafka 和 RabbitMQ 的区别是什么？各自的优缺点？**
- Kafka：高吞吐、持久化、适合大数据场景
- RabbitMQ：功能丰富、灵活路由、适合传统消息场景

**RocketMQ 的消息存储机制是怎样的？CommitLog、ConsumeQueue 的作用？**
- CommitLog：实际消息存储
- ConsumeQueue：消费索引文件

**消息队列如何保证幂等性？重复消费的问题如何解决？**
- 通过业务逻辑保证幂等性，如唯一ID、状态机等
